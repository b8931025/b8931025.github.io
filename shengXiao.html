<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>2025年生肖與年齡</title>
    <meta name="description" content="2025年生肖與年齡對應表，十二生肖、年齡、民國年、西元年及農曆干支年份的對應資訊。">
    <meta name="keywords" content="2025年,生肖,年齡,民國年,西元年,農曆,天干,地支,生肖對應表,鼠、牛、虎、兔、龍、蛇、馬、羊、猴、雞、狗、豬">
    <meta name="author" content="威力叔叔">    
    <script src="js/lunar/lunar.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
      body {
        background-color: #941921;
        min-height: 100vh;
      }

      .frame {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      h1.subject {
        text-align: center;
        padding: 0;
        margin: 4px 0;
        font-size: clamp(0.5rem, 4vw, 2.5rem);
        line-height: 1rem;
      }

      .container {
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        flex-wrap: wrap;
        width: 95%;
        height: 50%;
        padding: 5px;
      }

      .item {
        display: flex;
        flex: 0 0 16.66%;
        box-sizing: border-box;
        border: 1px solid yellow;
        font-size: 3rem;
        margin: 0px;
        justify-content: center;
        align-items: center;
        height: 100px;
        /*height: clamp(50px, 4vw, 400px);*/
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        cursor: pointer;
      }
      @media (max-width: 425px) {
        .item {
          height: 60px;
        }
      }
      .detailSubject {
        font-size: clamp(2rem, 4vw, 4rem);
        line-height: 2;
      }

      table {
        border-collapse: collapse;
        width: 95%;
        background-color: #fff8f0;
        color: black;
        font-size: clamp(1rem, 4vw, 2rem);
        margin: 0 auto;
        box-shadow: 0 2px 8px rgba(148,25,33,0.08);
      }

      .headAnimal
      {
        padding: 0px;
        width: 100%;
        background-color: #941921;
      }

      .headAnimal img {
        height: 2.5em;
        width: auto;
        vertical-align: middle;
        object-fit: contain;
        max-height: 100%;
      }

      th, td {
        border: 2px solid yellow;
        padding: 10px 0;
        text-align: center;
      }

      th {
        background-color: #f7a6a6;
        font-weight: bold;
      }

      tr:nth-child(odd) td {
        background-color: #fbeaea;
      }

      tr:nth-child(even) td {
        background-color: #f7a6a6;
      }      
    </style>
  </head>
  <body>
    <h1 class="subject"></h1>
    <div class="frame">
      <div class="container"></div>     

      <br>

      <table border="1" >
        <thead>
           <tr>
            <th colspan="4" class="headAnimal" >
              <img></img>
              <label class="detailSubject"></label>
              <img style="transform: scaleX(-1);"></img>
            </th>
          </tr>
          <tr>
            <th style="width:25%;">年齡</th>
            <th style="width:25%;">民國年</th>
            <th style="width:25%;">西元年</th>
            <th style="width:25%;">農曆年</th>
          </tr>
        </thead>
        <tbody class="detail">
        </tbody>
      </table>

    </div>
    <script>
      //文檔:https://6tail.cn/calendar/api.html

      /*
      ps:去年/今年/明年切換，響應式UI

      var today = new Date()
      //陽曆
      var solar = Solar.fromYmd(1981, 10, 19)
      //陽曆轉陰曆
      var lunar = solar.getLunar()

      document.write(`陰曆:${lunar.toString()} ${lunar.getYearInGanZhi()}年`)
      document.write('<br><br>')
      document.write('生肖:' + lunar.getYearShengXiao()) 
      document.write('<br><br>')
      document.write(`陽曆:${solar.toFullString()}`)
      document.write('<br><br>')
      document.write(`今日:${today.getFullYear()}`)
      document.write('<br><br>')
      */

      let today = new Date()
      let thisYear = today.getFullYear()     
      //十二生肖(繁體)
      let shengXiaoListTC = '鼠牛虎兔龍蛇馬羊猴雞狗豬'
      //十二生肖(簡體)
      let shengXiaoListSC = '鼠牛虎兔龙蛇马羊猴鸡狗猪'
      let thisYearAnimal = Solar.fromYmd(thisYear, 6, 1).getLunar().getYearShengXiao()
      thisYearAnimal = shengXiaoListTC[shengXiaoListSC.indexOf(thisYearAnimal)]
      let ageMax = 120
      let animalList = new Array(shengXiaoListTC.length)
      for(let y = 0; y < ageMax; y++)
      {
        let animalAge = y + 1
        let animalYear = thisYear - y
        let animalYearRoc = animalYear - 1911
        let lunar = Solar.fromYmd(animalYear, 6, 1).getLunar()
        let animalWord = lunar.getYearShengXiao()
        let animalGanZhi = lunar.getYearInGanZhi()
        //簡轉繁
        let idx = shengXiaoListSC.indexOf(animalWord)
        animalWord = shengXiaoListTC[idx]

        let animalInfo = {
          animalAge,
          animalYear,
          animalYearRoc,
          animalGanZhi,
          animalWord
        }

        if(!animalList[idx]) animalList[idx] = []
        animalList[idx].push(animalInfo)
      }
      const subject = document.querySelector('.subject');
      subject.innerHTML = `<h1>${thisYear}(${thisYearAnimal})年生肖與年齡</h1>`;

      // 產生生肖圖片與名稱
      const animalContainer = document.querySelector('.container');
      animalContainer.innerHTML = '';
      for (let i = 0; i < animalList.length; i++) {
        const animalWord = animalList[i][0].animalWord;
        const imgUrl = `data/img/animal_12/${(i+1).toString().padStart(2,'0')}_${animalWord}.jpg`;
        const div = document.createElement('div');
        div.addEventListener('click', () => changeDetail(i));
        div.className = 'item';
        div.style.backgroundImage = `url('${imgUrl}')`;
        //div.textContent = animalWord;
        animalContainer.appendChild(div);
      }

      document.write('<br><br>')

      changeDetail(0)

      function changeDetail(animalIdx) 
      {
        const detailSubject = document.querySelector('.detailSubject');
        detailSubject.innerHTML = animalList[animalIdx][0].animalWord;
        const headAnimal = document.querySelector('.headAnimal');
        const imgs = headAnimal.querySelectorAll('img');
        const imgUrl = `data/img/animal_12/${(animalIdx+1).toString().padStart(2,'0')}_${animalList[animalIdx][0].animalWord}.jpg`;
        imgs.forEach(img => {
          img.src = imgUrl;
        });

        const detail = document.querySelector('.detail');
        detail.innerHTML = '';
        for(let a = 0; a < animalList[animalIdx].length; a++)
        {
          let animal = animalList[animalIdx][a]
          let age = animal.animalAge.toString();
          let GanZhi = animal.animalGanZhi;
          let yearRoc = animal.animalYearRoc.toString();
          let year = animal.animalYear;
          if (animal.animalYearRoc <= 0)
          {
            yearRoc = '(民國前)' + (animal.animalYearRoc * -1 + 1).toString()
          }

          let rowInnerHtml =  '<tr>';
          rowInnerHtml += `<td>${age}</td>`;
          rowInnerHtml += `<td>${yearRoc}</td>`;
          rowInnerHtml += `<td>${year}</td>`;
          rowInnerHtml += `<td>${GanZhi}</td>`;
          rowInnerHtml += '</tr>';
          detail.innerHTML += rowInnerHtml
        }
      }
    </script>  

  </body>
</html>