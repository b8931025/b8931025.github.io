<!DOCTYPE html>
<html lang="en">
<head>
    <title>Học tiếng Trung</title>
    <meta name="description" content="Học tiếng Trung">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引用 Vue 3 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.min.js"></script>
    <!-- <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script> -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap-dialog@1.34.6/dist/js/bootstrap-dialog.min.js"></script>
    <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-dialog@1.34.6/dist/css/bootstrap-dialog.min.css">
  <style>
    .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f3f3f3;
    }

    .loading-text {
      font-size: 24px;
    }

    #app {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .word-item {
      display: flex;
      align-items: flex-start;
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background-color: #f9f9f9;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      width: 50%;
    }
    .word-image {
        margin-right: 20px;
    }

    .word-image img {
      width: 160px;         /* 4:3比例，寬160px，高120px */
      height: 120px;
      object-fit: contain;  /* 保持原有圖片比例，內容完整顯示 */
      border-radius: 8px;
      margin-right: 15px;
      background: #fff;     /* 若圖片非4:3會有留白 */
    }

    @media (max-width: 768px) {
      .word-item {
        flex-direction: column;
        align-items: center;
        width: 95%;
      }
      .word-image {
        margin-right: 0;
        margin-bottom: 10px;
      }
      .word-image img {
        width: 100%;
        height: auto;
        max-width: 250px;
        max-height: 180px;
      }
      .word-info {
        align-items: center;
      }
    }

    .word-info {
        display: flex;
        flex-direction: column;
        justify-content: center;
        flex: 1;
        gap: 8px;
    }

    .word-chinese {
        font-size: 1.5em;
        color: #333;
        margin: 0;
    }

    .word-pinyin {
        font-size: 1.2em;
        color: #666;
        margin: 5px 0;
    }

    .word-translation {
        font-size: 1em;
        color: #999;
        margin: 5px 0;
    }
  </style>
</head>
<body>
    <div id="loading" class="loading"><div class="loading-text">Loading...</div></div>

    <div id="app">
      <div v-for="(word, index) in wordList" :key="index" class="word-item">
        <div class="word-image">
          <img :src="word.src" alt="圖片">
        </div>
        <div class="word-info">
          <div>Tiếng Trung：<button @click="speakText(word.chWord)">{{ word.chWord }}</button></div>
          <div>Bính âm：{{ word.pinyin }}</div>
          <div>Tiếng Việt：{{ word.vnWord }}</div>
        </div>
      </div>
    </div>

    <script>
      window.addEventListener('load', function () {
          setTimeout(() => { 
              document.getElementById('loading').style.display = 'none';
          }, 500);
      });

        // 創建 Vue 應用程序
        const { createApp, onMounted, getCurrentInstance, nextTick } = Vue;
        createApp({
            setup() {
                const instance = getCurrentInstance()
                const proxy = instance.proxy

                onMounted(() => {
                    // 在這裡可以執行其他需要在掛載後進行的操作
                    // 在這裡可以安全地使用 proxy訪問 data 中的屬性和methods
                    
                  // 使用 fetch 讀取 JSON 檔案
                  fetch('data/C0C1E6F4-2354-463E-90A3-8EFFEE7D87F4.json')
                    .then(response => {
                      console.log('xxx')
                      return response.json()
                    })
                    .then(json => {
                        this.lession = json;
                        this.wordList = json.List;
                        console.log('wordList', this.wordList)
                    })
                    .catch(err => {
                        console.error('讀取 JSON 檔案失敗', err);
                    });                    
                 
                });
            },
            data() {
                return {
                  lession: null,
                  wordList: null
                };
            },
            watch: {

            },
            methods: {
                speakText(txt) {
                  const msg = new SpeechSynthesisUtterance(txt);
                  msg.lang = 'zh-TW'; // 設置語言為中文
                  //msg.lang = 'vi-VN'; // 設置語言為越語
                  msg.rate = 0.3; // 語速
                  window.speechSynthesis.speak(msg);

                },
                getVoiceInfo() {
                  //取得各種人聲資訊
                  const utterance = new SpeechSynthesisUtterance("Xin chào!"); 
                  const voices = speechSynthesis.getVoices();
                  utterance.voice = voices.find(voice => voice.name.includes("Vietnamese")); 
                  speechSynthesis.speak(utterance);
                  speechSynthesis.getVoices().forEach(voice => console.log(voice.name, voice.lang));
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
